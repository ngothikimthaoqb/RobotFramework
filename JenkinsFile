timeout(time: 5, unit: 'MINUTES') {
    node {
           def workspace = pwd()
           stage('Git pull') {
              checkout scm
              echo 'checkout'
           }

           stage('robot'){
               bat "cd ${workspace}"
               bat "pip install allure-robotframework"
               bat "robot --listener allure_robotframework ./Tests"
                catchError(buildResult: 'SUCCESS', stageResult: 'FAILURE') {
                    bat "exit 1"
                }
           }

           stage('allure'){
               allure([
                  disabled: false,
                  includeProperties: false,
                  jdk: '',
                  reportBuildPolicy: 'ALWAYS',
                  results: [[path: '${workspace}/output/allure']]
               ])
               echo 'report'
           }
    }
}